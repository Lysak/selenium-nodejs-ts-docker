import { Builder, By, until } from 'selenium-webdriver';
import chrome from 'selenium-webdriver/chrome';

async function runTest() {
    let driver;

    try {
        const options = new chrome.Options();
        // Modify this path to the location of your Chrome profile directory
        const profilePath = 'C:\\Users\\<YourUsername>\\AppData\\Local\\Google\\Chrome\\User Data\\Default';
        options.addArguments(`--user-data-dir=${profilePath}`);

        // Additional optional arguments
        options.addArguments('--disable-infobars');
        options.addArguments('--disable-extensions');
        options.addArguments('--start-maximized');
        options.addArguments('--disable-blink-features=AutomationControlled');

        driver = await new Builder()
            .forBrowser('chrome')
            .setChromeOptions(options)
            .build();

        await driver.get('https://www.example.com');

        const title = await driver.getTitle();
        console.log(`Page title is: ${title}`);

        // Execute further actions with your loaded profile

    } catch (error) {
        console.error('An error occurred:', error);
    } finally {
        if (driver) {
            // Optionally, keep the browser open
            // await driver.quit();
        }
    }
}

runTest();
